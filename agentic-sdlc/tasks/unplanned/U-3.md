# Task ID: U-3
# Title: Implement UI smoke tests (E2E tests)
# Status: [x] Completed
# Priority: high
# Owner: Frontend Dev
# Estimated Effort: 2-3h

## Description
Implement end-to-end (E2E) smoke tests using Playwright to verify critical user flows work correctly. This is required by `docs/requirements.md` Section 11: Tests.

## Dependencies
- [x] Task ID: 10.2 (Frontend must exist)
- [x] Task ID: 2.3 (Login endpoint must exist)
- [x] Task ID: 3.3 (Task CRUD endpoints must exist)

## Requirements
1. **Playwright Setup**:
   - Install Playwright and dependencies
   - Configure `playwright.config.js`
   - Set up test directory structure

2. **Test Coverage**:
   - Authentication flows (login, registration)
   - Task management (create, view, list, search, filter)
   - Attachments (view attachments section)

3. **Test Utilities**:
   - Helper functions for common operations
   - Test user setup instructions

## Implementation Steps
1. ✅ Install Playwright: `npm install --save-dev @playwright/test playwright`
2. ✅ Install browser: `npx playwright install chromium`
3. ✅ Create `playwright.config.js` with base URL and web server config
4. ✅ Create test files:
   - `tests/e2e/auth.spec.js` - Authentication tests
   - `tests/e2e/tasks.spec.js` - Task management tests
   - `tests/e2e/attachments.spec.js` - Attachment tests
5. ✅ Add npm scripts: `test:e2e`, `test:e2e:ui`, `test:e2e:headed`
6. ✅ Update README with test instructions

## Acceptance Criteria
- [x] Playwright installed and configured
- [x] Test files created for auth, tasks, and attachments
- [x] Tests can be run with `npm run test:e2e`
- [x] Tests cover critical user flows
- [x] Documentation explains how to run tests
- [x] Test user setup instructions provided

## Test Files Created

### `auth.spec.js`
- ✅ Login with valid credentials
- ✅ Login error handling
- ✅ User registration and auto-login

### `tasks.spec.js`
- ✅ Display task list
- ✅ Create new task
- ✅ View task detail
- ✅ Search tasks
- ✅ Filter tasks by status

### `attachments.spec.js`
- ✅ Display attachments section
- ✅ Attachment upload UI (basic smoke test)

## Running Tests

```bash
# Run all E2E tests
npm run test:e2e

# Run with UI mode (interactive)
npm run test:e2e:ui

# Run in headed mode (see browser)
npm run test:e2e:headed
```

## Prerequisites

1. Backend API running on `http://localhost:8000`
2. Frontend dev server running on `http://localhost:5173`
3. Test user created: `testuser` / `testpassword`

## Test User Setup

```bash
cd backend
.venv/bin/python3 scripts/create_user.py testuser test@example.com testpassword
```

## Notes
- Playwright automatically starts dev server if not running
- Tests use Chromium browser
- Configuration supports CI/CD with retries and workers
- Tests are smoke tests (critical flows only, not exhaustive)

## Related Tasks
- Task 10.2: Set up React project and routing (prerequisite)
- Task 11.2: Implement required test categories (this task)
